% knight.lmn
%       2008.12.20  gocho
%
% Knight's Tour Problem

% board(5) -> knight_n5.il
% board(6) -> knight_n6.il
% board(7) -> knight_n7.il
% board(8) -> knight_n8.il
% board(9) -> knight_n9.il

% property0: 解は存在しない

% board(N): board is initialized size N 
init{
  board(5).
  k_position(null).

  ini0 @@ board(B) :- int(B) |
          board(B, B, fin(B)).
  ini1 @@ board(A, B, fin(F)) :- int(B), A=\=0, A2=A-1	|
          board(A2,B, fin(F)), p(A, B).
  ini2 @@ board(A, B, fin(F))  :- int(F), A=:=0, B>1,	B2=B-1	|
          board(F, B2,fin(F)).
//  set0 @@ k_position(null), p(X,Y), board(0, 1, fin(F)) :- int(F), int(X), int(Y)	|
	//  		  k_position(X, Y).
	% knightの初期位置をp(1,1)とした場合
  set0 @@ k_position(null), p(X,Y), board(0, 1, fin(F)) :- int(F), X=:=1, Y=:=1	|
	  		  k_position(X, Y).	
}.
iend @@ init{$i,@i}/ :- $i.

set1 @@ k_position(X, Y), p(M, N) :- X=\=M, Y=\=N,
                                    ((X-M) mod 2)=:=0, (X-M)=<2, (X-M)>=-2, 
                                    (Y-N)=<1, (Y-N)>=-1	|
			  k_position(M, N).

set2 @@ k_position(X, Y), p(M, N) :- X=\=M, Y=\=N,
				 														(X-M)=<1, (X-M)>=-1, 
                                    ((Y-N) mod 2)=:=0, (Y-N)=<2, (Y-N)>=-2		|
			  k_position(M, N).
			 